# Manual conf begin
NAME = main
LATEX = -pdf
OTHER_DEPS = #plots/preamble.tex
# Manual conf end

#PLOTS_TEX := $(shell find plots/ -name 'plot*.tex')
PLOTS_PDF := $(PLOTS_TEX:.tex=.pdf)

make: $(NAME).pdf

$(NAME).pdf: $(PLOTS_PDF) $(NAME).tex $(OTHER_DEPS)
	latexmk $(LATEX) $(NAME).tex

$(PLOTS_PDF): %.pdf: %.tex $(OTHER_DEPS)
	latexmk -cd -lualatex $<
	rm -f $(NAME).pdf

open:
	open $(NAME).pdf

clean:
	latexmk -C $(NAME).tex
	#latexmk -cd -C $(PLOTS_TEX)

clean-aux:
	latexmk -c $(NAME).tex
	#latexmk -cd -c $(PLOTS_TEX)

sync:
	latexmk -pvc $(LATEX) -interaction=nonstopmode $(NAME).tex

remake: clean-aux
	latexmk $(LATEX) $(NAME).tex

#plots: $(PLOTS_PDF)

.PHONY: make open clean clean-aux sync remake #plots
